'\" t
.\"     Title: g7sh
.\"    Author: Johan Persson <johan162@gmail.com>
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 04/20/2015
.\"    Manual: http://sourceforge.net/projects/g7ctrl/docs/
.\"    Source: http://sourceforge.net/projects/g7ctrl/ @VERSION@
.\"  Language: English
.\"
.TH "G7SH" "1" "04/20/2015" "http://sourceforge\&.net/proje" "http://sourceforge\&.net/proje"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
g7sh \- Command line shell to interface g7ctrl daemon
.SH "SYNOPSIS"
.HP \w'\fBg7sh\fR\ 'u
\fBg7sh\fR [options\&.\&.\&.]
.SH "DESCRIPTION"
.PP
The
\fBg7sh\fR(1)
is a command line shell meant to interface the
\fBg7ctrl\fR
daemon\&. The program offers full command line editing (emulating
\fBemacs\fR
command set) as well as history\&. This makes it the preferred way to interface with the daemon for the full feature set\&. The alternative command line way is to connect directly to the daemon port using for example
\fBtelnet\fR
or
\fBnc\fR, however this is only recommended for troubleshooting purposes\&.
.PP
The shell can be run either on the same server as the daemon or on a separate computer\&. In the forst case it is simple a matter of starting the shell with
.PP
.if n \{\
.RS 4
.\}
.nf
$> g7sh
.fi
.if n \{\
.RE
.\}
.PP
If it is run on a separate computer the IP\-address to the server must be given
.PP
.if n \{\
.RS 4
.\}
.nf
$> g7sh \-s 192\&.168\&.0\&.10
.fi
.if n \{\
.RE
.\}
.PP
If the config file can not be found in the common place (i\&.e\&.
/etc/g7ctrl/g7ctrl\&.conf) then the shell will look for a shell specific config file "\&.g7sh" in the users home directory\&. Command line argument will however always override any ini file setting\&.
.SH "ARGUMENTS"
.PP
The following command line arguments are supported when starting the shell
.PP
\fB\-s\fR, \fB\-\-server\fR \fIIP\-address\fR
.RS 4
Specify the server that is running
\fBg7ctrl\fR\&. Default value is
\fIlocalhost\fR
.RE
.PP
\fB\-p\fR, \fB\-\-port\fR \fITCP/IP cmd port\fR
.RS 4
TCP/IP port where the
\fBg7ctrl\fR
server is listening\&. If the shell is run on the same server as the daemon then the port will be automatically determined from the
\fBg7ctrl\fR
config file\&.
.RE
.PP
\fB\-h\fR, \fB\-\-help\fR
.RS 4
Print a short help and exit\&.
.RE
.PP
\fB\-v\fR, \fB\-\-version\fR
.RS 4
Print program version information and exit\&.
.RE
.PP
\fB\-e\fR, \fB\-\-exec\fR \fI"command\-string"\fR
.RS 4
Execute the given commands and terminate\&. Multiple commands are separetaed with a semicolon ";"
.RE
.SH "USING THE SHELL AS A LOGIN SHELL"
.PP
One possible way to use the shell is to use it as a
\fIsystem login shell\fR\&. In this way it will be possible to login directly to the server by using, for example,
\fBssh\fR
and connecting as a dedicated user who uses
\fBg7sh\fR
as default login shell\&.
.PP
In order to do this there are two things that must be done:
.PP
.RS 4
.ie n \{\
\h'-04' 1.\h'+01'\c
.\}
.el \{\
.sp -1
.IP "  1." 4.2
.\}
Add a new user to the server and specify
\fBg7sh\fR
as the login shell\&. This is done by adding a line in the
/etc/passwd
file\&. For example as
.sp
.if n \{\
.RS 4
.\}
.nf
g7m:x:0:0:g7ctrl shell user:/home/g7ctrl:/usr/bin/g7sh 
.fi
.if n \{\
.RE
.\}
.sp
The above line creates a new user called
\fIpvr\fR
which uses
\fBg7sh\fR
as login shell\&. (The \*(Aq\fIx\fR\*(Aq in the password field indicates that the system is using shadow passwords\&.)\&. You can also use the system tools you are comfortable with in order to create a new user\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04' 2.\h'+01'\c
.\}
.el \{\
.sp -1
.IP "  2." 4.2
.\}
Allow
\fBg7sh\fR
to be used as system shell by adding it to the list of allowed system shells in \*(Aq/etc/shells\*(Aq
.RE
.sp
.SH "FILES"
.PP
/etc/g7ctrl/g7ctrl\&.conf
.RS 4
Default configuration file
.RE
.PP
~/\&.g7shrc
.RS 4
Default configuration file if
/etc/g7ctrl/g7ctrl\&.conf
does not exist
.RE
.PP
~/\&.g7ctrl_history
.RS 4
Stores the history of previous commands
.RE
.SH "RESOURCES"
.PP
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
SourceForge: <http://sourceforge\&.net/projects/g7ctrl/>
.RE
.sp
.SH "KNOWN DEFECTS"
.PP
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Limited line editing and history function on Apple OSX due to different terminal behavior and no native readline library support\&. Full support requires the installation of GNU libreadline if built on OSX\&.
.RE
.sp
.SH "AUTHOR"
.PP
Written and maintained by Johan Persson <<johan162@gmail\&.com>>
.SH "COPYRIGHT"
.PP
Free use of this software is granted under the terms of the
GNU
General Public License (GPL v3)\&., see the file COPYING included in the distribution archive for details\&.
.SH "SEE ALSO"
.PP
\fBg7ctrl\fR(1)
.SH "AUTHOR"
.PP
\fBJohan Persson\fR <\&johan162@gmail\&.com\&>
.RS 4
Main author and maintainer
.RE
